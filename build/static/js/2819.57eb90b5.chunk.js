"use strict";(self.webpackChunkonlinememo_react_project=self.webpackChunkonlinememo_react_project||[]).push([[2819,211,61],{211:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var o=t(9610);const a=o.Z.create({baseURL:"https://api.onlinememo.kr"});function r(){const e=window.location.pathname;"/"!==e&&"/login"!==e&&(window.location.href="/login")}a.interceptors.request.use((function(e){const n=localStorage.getItem("accessToken");return n&&(e.headers.Authorization="Bearer ".concat(n)),e})),a.interceptors.response.use((function(e){return e}),(async function(e){var n,t,s,i,c,l;const d=e.config,p={accessToken:localStorage.getItem("accessToken"),refreshToken:localStorage.getItem("refreshToken")};if(401===(null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.status)&&"TOKEN_EXPIRED"===e.response.data.code&&"ERROR - JWT \ud1a0\ud070 \ub9cc\ub8cc \uc5d0\ub7ec"===e.response.data.message){try{const e=await o.Z.post("".concat("https://api.onlinememo.kr","/reissue"),p);if(e)return localStorage.setItem("accessToken",e.data.data.accessToken),localStorage.setItem("refreshToken",e.data.data.refreshToken),await a.request(d)}catch(e){console.error(e),localStorage.clear(),sessionStorage.clear(),r()}return Promise.reject(e)}return 401===(null===(s=e.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.status)?(localStorage.clear(),sessionStorage.clear(),r()):404===(null===(c=e.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.status)&&(window.location.href="/404"),Promise.reject(e)}));const s=a},6737:(e,n,t)=>{t.r(n),t.d(n,{default:()=>w});var o,a,r=t(168),s=t(7313),i=t(244),c=(t(281),t(61)),l=t(211),d=t(2600),p=(t(6419),t(5845)),u=t.n(p),f=t(7548),g=t.n(f),x=t(6868),h=(t(1105),t(6417));const m=i.ZP.div(o||(o=(0,r.Z)(['\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n\n    width: 100%;\n    height: calc(100vh - 12px - 23px);  // 100vh - paddingTop - paddingBottom\n    padding-top: 12px;\n    padding-bottom: 23px;\n    overflow: auto;\n\n    background-color: #f4f3ee;\n    font-family: "jua";\n    font-size: 15px;\n\n    h1 {\n        margin-top: 12px;\n        margin-bottom: 14px;\n        font-size: 27px;\n        color: #463f3a;\n    }\n\n    #dateContainer {\n        position: fixed;\n        top: 10.5px;\n        right: 100px;\n        padding: 6px 10px;\n        background-color: gray;\n        border: none;\n        border-radius: 4px;\n        font-size: 13px;\n        font-weight: 700;\n        color: #463f3a;\n        z-index: 998;\n\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n        align-items: center;\n        height: 16px;\n    }\n\n    #logoutButton {\n        position: fixed;\n        top: 10.5px;\n        right: 10.5px;\n        padding: 6px 10px;\n        background-color: #bcb8b1;\n        border: none;\n        border-radius: 4px;\n        font-size: 13px;\n        font-weight: 700;\n        color: #463f3a;\n        z-index: 998;\n\n        &:hover {\n            cursor: pointer;\n            background-color: #837a72;\n        }\n    }\n\n    .gridjs-footer {\n        padding: 9px 19px !important;\n    }\n    \n    &::-webkit-scrollbar {\n        width: 5px;\n        background-color: #f4f3ee;\n        border-radius: 4px;\n    }\n    &::-webkit-scrollbar-thumb {\n        background-color: #bcb8b1;\n        border-radius: 4px;\n    }\n']))),b=i.ZP.div(a||(a=(0,r.Z)(["\n    position: relative;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n\n    #userContainer {\n        position: absolute;\n        right: -175px;\n        padding: 6px 10px;\n        background-color: gray;\n        border: none;\n        border-radius: 4px;\n        font-size: 13px;\n        font-weight: 700;\n        color: #463f3a;\n\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n        align-items: center;\n    }\n"])));const w=function(e){const[n,t]=(0,s.useState)(0),[o,a]=(0,s.useState)(0),[r,i]=(0,s.useState)(null),[p,f]=(0,s.useState)(null),w=(0,s.useRef)(null);(0,s.useEffect)((()=>{!async function(){await l.default.get("/back-office/users/statistics").then((e=>{const n=e.data.data;t(n.signupUserCount),a(n.withdrawnUserCount)})).catch((e=>{}))}(),async function(e,n){await l.default.get("/back-office/ga4/calc-data",{params:{startDatetime:e,endDatetime:n}}).then((e=>{const n=e.data.data,t=new Map,o=new Map,a=new Map,r=new Map,s=new Map,c=new Map;n.forEach((e=>{const n=e.eventDatetime.slice(0,10),[i,l,d]=n.split("-");t.has(n)||(t.set(n,{year:i,month:l,day:d,yearSuffix:i.slice(2,4)}),o.set(n,new Set),a.set(n,new Set),r.set(n,0),s.set(n,new Set),c.set(n,new Set));const p=e.loginUserId,u=e.userPseudoId;p>0&&(o.get(n).add(p),s.get(n).add(u)),a.get(n).add(u),r.set(n,r.get(n)+1)})),n.forEach((e=>{const n=e.eventDatetime.slice(0,10),t=e.loginUserId,o=e.userPseudoId;0!==t||s.get(n).has(o)||c.get(n).add(o)}));const l=[];for(const i of t.keys()){const e=t.get(i),n=o.get(i).size,s=a.get(i).size,d=c.get(i).size+n,p=r.get(i);l.push({dateInfo:e,uniqueUserCount:d,loginUserCount:n,activeUserCount:s,pageViewCount:p})}const d=Object.fromEntries([["\ub0a0\uc9dc",e=>"".concat(e.dateInfo.month,"/").concat(e.dateInfo.day)],["\uc2e4\uc0ac\uc6a9\uc790 \uc218",e=>e.uniqueUserCount],["\ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790 \uc218",e=>e.loginUserCount],["\ud65c\uc131 \uc0ac\uc6a9\uc790 \uc218",e=>e.activeUserCount],["\uc870\ud68c\uc218",e=>e.pageViewCount]].map((e=>{let[n,t]=e;return[n,l.map(t)]})));i(d)})).catch((e=>{}))}("2025-08-01 15:30:00","2025-08-29 23:59:59"),async function(e,n){await l.default.get("/back-office/ga4/statistics",{params:{startDatetime:e,endDatetime:n}}).then((e=>{const n=e.data.data,t=Object.fromEntries([["\uc21c\uc704",(e,n)=>n+1],["\ud398\uc774\uc9c0 \uacbd\ub85c",e=>e.pagePath],["\uc2e4\uc0ac\uc6a9\uc790 \uc218",e=>e.uniqueUserCount],["\ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790 \uc218",e=>e.loginUserCount],["\ud65c\uc131 \uc0ac\uc6a9\uc790 \uc218",e=>e.activeUserCount],["\uc870\ud68c\uc218",e=>e.pageViewCount],["\ubbf8\uc778\uc99d \uc811\uadfc \ucc28\ub2e8",e=>e.unauthBlockedCount]].map((e=>{let[t,o]=e;return[t,n.map(o)]})));f(t)})).catch((e=>{}))}("2025-08-01 15:30:00","2025-08-29 23:59:59")}),[]);const y=e=>{let{columns:n}=e;const t={chart:{type:"line"},credits:{enabled:!1},title:{text:"\uc77c\ubcc4 \uc0ac\uc6a9\uc790 \ud1b5\uacc4",style:{fontSize:"14px",color:"#333333"}},subtitle:{text:'<a href="https://onlinememo.kr" target="_blank">www.OnlineMemo.kr</a>',style:{fontSize:"9px"}},xAxis:{categories:n["\ub0a0\uc9dc"],labels:{style:{fontSize:"10px",color:"#333333"}}},yAxis:[{title:{text:"\uc0ac\uc6a9\uc790 \uc218",style:{fontSize:"10px",fontWeight:"bold",color:"#333333"}},labels:{style:{fontSize:"9px",color:"#333333"}},opposite:!1},{title:{text:"\uc870\ud68c\uc218",style:{fontSize:"10px",fontWeight:"bold",color:"#333333"}},labels:{style:{fontSize:"9px",color:"#333333"}},opposite:!0}],plotOptions:{line:{dataLabels:{enabled:!0},enableMouseTracking:!1,lineWidth:2.5}},series:[{name:"\uc2e4\uc0ac\uc6a9\uc790 \uc218",data:n["\uc2e4\uc0ac\uc6a9\uc790 \uc218"],yAxis:0,color:"#FF0000"},{name:"\ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790 \uc218",data:n["\ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790 \uc218"],yAxis:0,color:"#FF7F00"},{name:"\ud65c\uc131 \uc0ac\uc6a9\uc790 \uc218",data:n["\ud65c\uc131 \uc0ac\uc6a9\uc790 \uc218"],yAxis:0,color:"#FFD700"},{name:"\uc870\ud68c\uc218",data:n["\uc870\ud68c\uc218"],yAxis:1,color:"#1a75ff"}]};return(0,h.jsx)(g(),{highcharts:u(),options:t})};return(0,s.useEffect)((()=>{p&&w.current&&(w.current.innerHTML="",new x.rj({columns:Object.keys(p),data:p["\uc21c\uc704"].map(((e,n)=>Object.keys(p).map((e=>p[e][n])))),pagination:{enabled:!0,limit:8,summary:!1},search:!1,style:{table:{borderCollapse:"collapse",width:"100%",border:"1px solid #ccc"},th:{padding:"11px 13px 11px 19.5px",backgroundColor:"#f0f0f0",border:"1px solid #ccc",color:"#444",fontWeight:"600"},tr:{backgroundColor:"#fff"},td:{padding:"11px 13px 11px 19.5px",border:"1px solid #ccc",color:"#333"}}}).render(w.current))}),[p]),(0,s.useEffect)((()=>{(0,c.CheckToken)();const e=document.querySelector("header");e&&(e.style.display="none");const n=document.querySelector("footer");n&&(n.style.display="none");const t=document.querySelector("html");t&&(t.style.margin="0px")}),[]),(0,h.jsxs)(m,{children:[(0,h.jsxs)(b,{children:[(0,h.jsx)("h1",{children:"[ \uc628\ub77c\uc778 \uba54\ubaa8\uc7a5 - Back Office ]"}),(0,h.jsxs)("div",{id:"userContainer",children:[" ",(0,h.jsxs)("div",{children:["\uac00\uc785\uc790: ",n,"\uba85"]}),",\xa0",(0,h.jsxs)("div",{children:["\ud0c8\ud1f4\uc790: ",o,"\uba85"]})]})]}),(0,h.jsx)("br",{}),(0,h.jsx)("div",{style:{width:"76%",maxHeight:"500px",marginLeft:"4px",marginBottom:"2px",border:"1px solid #ccc",borderRadius:"3px"},children:r&&(0,h.jsx)(y,{columns:r,style:{width:"100%",height:"100%"}})}),(0,h.jsx)("div",{ref:w,style:{width:"76%"}}),(0,h.jsxs)("button",{id:"logoutButton",onClick:()=>{(0,d._1)({title:"\ub85c\uadf8\uc544\uc6c3 \ud655\uc778",message:"\uc815\ub9d0 \ub85c\uadf8\uc544\uc6c3 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",buttons:[{label:"\uc608",onClick:()=>{localStorage.clear(),sessionStorage.clear(),window.location.href="/login"}},{label:"\uc544\ub2c8\uc624",onClick:()=>{}}]})},children:["\ub85c\uadf8\uc544\uc6c3 ",(0,h.jsx)("i",{className:"fa fa-sign-out","aria-hidden":"true"})]}),(0,h.jsxs)("div",{id:"dateContainer",children:[(0,h.jsx)("div",{children:"\ub0a0\uc9dc\uc704\uce581"}),"\xa0",(0,h.jsx)("div",{children:"\ub0a0\uc9dc\uc704\uce582"})]})]})}},61:(e,n,t)=>{function o(){const e=localStorage.getItem("accessToken"),n=localStorage.getItem("refreshToken");e&&n||(window.location.href="/login")}t.r(n),t.d(n,{CheckToken:()=>o})}}]);