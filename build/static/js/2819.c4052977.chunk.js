"use strict";(self.webpackChunkonlinememo_react_project=self.webpackChunkonlinememo_react_project||[]).push([[2819,211,61],{211:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var o=n(9610);const a=o.Z.create({baseURL:"https://api.onlinememo.kr"});function s(){const e=window.location.pathname;"/"!==e&&"/login"!==e&&(window.location.href="/login")}a.interceptors.request.use((function(e){const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e})),a.interceptors.response.use((function(e){return e}),(async function(e){var t,n,r,i,c,l;const d=e.config,p={accessToken:localStorage.getItem("accessToken"),refreshToken:localStorage.getItem("refreshToken")};if(401===(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.status)&&"TOKEN_EXPIRED"===e.response.data.code&&"ERROR - JWT \ud1a0\ud070 \ub9cc\ub8cc \uc5d0\ub7ec"===e.response.data.message){try{const e=await o.Z.post("".concat("https://api.onlinememo.kr","/reissue"),p);if(e)return localStorage.setItem("accessToken",e.data.data.accessToken),localStorage.setItem("refreshToken",e.data.data.refreshToken),await a.request(d)}catch(e){console.error(e),localStorage.clear(),sessionStorage.clear(),s()}return Promise.reject(e)}return 401===(null===(r=e.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.status)?(localStorage.clear(),sessionStorage.clear(),s()):404===(null===(c=e.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.status)&&(window.location.href="/404"),Promise.reject(e)}));const r=a},6737:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var o,a,s,r=n(168),i=n(7313),c=n(244),l=(n(281),n(61)),d=n(211),p=n(2600),u=(n(6419),n(5845)),f=n.n(u),g=n(7548),x=n.n(g),h=n(6868),m=(n(1105),n(6417));const b=c.ZP.div(o||(o=(0,r.Z)(['\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n\n    width: 100%;\n    height: calc(100vh - 12px - 23px);  // 100vh - paddingTop - paddingBottom\n    padding-top: 12px;\n    padding-bottom: 23px;\n    overflow: auto;\n\n    background-color: #f4f3ee;\n    font-family: "jua";\n    font-size: 15px;\n\n    h1 {\n        margin-top: 12px;\n        margin-bottom: 14px;\n        font-size: 27px;\n        color: #463f3a;\n    }\n\n    #customContainer {\n        position: fixed;\n        top: 10.5px;\n        right: 100px;\n        padding: 6px 10px;\n        background-color: #c4b8b2;\n        border-radius: 4px;\n        font-size: 13px;\n        font-weight: 700;\n        color: #463f3a;\n        z-index: 998;\n\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n        align-items: center;\n        height: 16px;\n    }\n\n    #logoutButton {\n        position: fixed;\n        top: 10.5px;\n        right: 10.5px;\n        padding: 6px 10px;\n        background-color: #bcb8b1;\n        border: none;\n        border-radius: 4px;\n        font-size: 13px;\n        font-weight: 700;\n        color: #463f3a;\n        z-index: 998;\n\n        &:hover {\n            cursor: pointer;\n            background-color: #837a72;\n        }\n    }\n\n    .gridjs-footer {\n        padding: 9px 19px !important;\n    }\n    \n    &::-webkit-scrollbar {\n        width: 5px;\n        background-color: #f4f3ee;\n        border-radius: 4px;\n    }\n    &::-webkit-scrollbar-thumb {\n        background-color: #bcb8b1;\n        border-radius: 4px;\n    }\n\n    @media(max-width: 650px) {\n        zoom: 60%;\n        overflow: visible;\n    }\n']))),w=c.ZP.div(a||(a=(0,r.Z)(["\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n"]))),y=c.ZP.div(s||(s=(0,r.Z)(["\n    position: absolute;\n    top: 7.5px;\n    right: 11px;\n    padding: 5px 9px;\n    background-color: #c3c3c3aa;\n    border-radius: 4px;\n    font-size: 13px;\n    font-weight: 500;\n    color: #463f3a;  // 333333\n\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    z-index: 999;\n"])));const k=function(e){const[t,n]=(0,i.useState)(0),[o,a]=(0,i.useState)(0),[s,r]=(0,i.useState)(null),[c,u]=(0,i.useState)(null),g=(0,i.useRef)(null);(0,i.useEffect)((()=>{!async function(){await d.default.get("/back-office/users/statistics").then((e=>{const t=e.data.data;n(t.signupUserCount),a(t.withdrawnUserCount)})).catch((e=>{}))}(),async function(e,t){await d.default.get("/back-office/ga4/calc-data",{params:{startDatetime:e,endDatetime:t}}).then((e=>{const t=e.data.data,n=new Map,o=new Map,a=new Map,s=new Map,i=new Map,c=new Map;t.forEach((e=>{const t=e.eventDatetime.slice(0,10),[r,l,d]=t.split("-");n.has(t)||(n.set(t,{year:r,month:l,day:d,yearSuffix:r.slice(2,4)}),o.set(t,new Set),a.set(t,new Set),s.set(t,0),i.set(t,new Set),c.set(t,new Set));const p=e.loginUserId,u=e.userPseudoId;p>0&&(o.get(t).add(p),i.get(t).add(u)),a.get(t).add(u),s.set(t,s.get(t)+1)})),t.forEach((e=>{const t=e.eventDatetime.slice(0,10),n=e.loginUserId,o=e.userPseudoId;0!==n||i.get(t).has(o)||c.get(t).add(o)}));const l=[];for(const r of n.keys()){const e=n.get(r),t=o.get(r).size,i=a.get(r).size,d=c.get(r).size+t,p=s.get(r);l.push({dateInfo:e,uniqueUserCount:d,loginUserCount:t,activeUserCount:i,pageViewCount:p})}const d=Object.fromEntries([["\ub0a0\uc9dc",e=>"".concat(e.dateInfo.month,"/").concat(e.dateInfo.day)],["\uc2e4\uc0ac\uc6a9\uc790 \uc218",e=>e.uniqueUserCount],["\ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790 \uc218",e=>e.loginUserCount],["\ud65c\uc131 \uc0ac\uc6a9\uc790 \uc218",e=>e.activeUserCount],["\uc870\ud68c\uc218",e=>e.pageViewCount]].map((e=>{let[t,n]=e;return[t,l.map(n)]})));r(d)})).catch((e=>{}))}("2025-08-01 15:30:00","2025-08-31 23:59:59"),async function(e,t){await d.default.get("/back-office/ga4/statistics",{params:{startDatetime:e,endDatetime:t}}).then((e=>{const t=e.data.data,n=Object.fromEntries([["\uc21c\uc704",(e,t)=>t+1],["\ud398\uc774\uc9c0 \uacbd\ub85c",e=>e.pagePath],["\uc2e4\uc0ac\uc6a9\uc790 \uc218",e=>e.uniqueUserCount],["\ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790 \uc218",e=>e.loginUserCount],["\ud65c\uc131 \uc0ac\uc6a9\uc790 \uc218",e=>e.activeUserCount],["\uc870\ud68c\uc218",e=>e.pageViewCount],["\ubbf8\uc778\uc99d \uc811\uadfc \ucc28\ub2e8",e=>e.unauthBlockedCount]].map((e=>{let[n,o]=e;return[n,t.map(o)]})));u(n)})).catch((e=>{}))}("2025-08-01 15:30:00","2025-08-31 23:59:59")}),[]);const k=e=>{let{columns:t}=e;const n={chart:{type:"line"},credits:{enabled:!1},title:{text:"\uc77c\ubcc4 \uc0ac\uc6a9\uc790 \ud1b5\uacc4",style:{fontSize:"14px",color:"#333333"}},subtitle:{text:'<a href="https://onlinememo.kr" target="_blank">www.OnlineMemo.kr</a>',style:{fontSize:"9px"}},xAxis:{categories:t["\ub0a0\uc9dc"],labels:{style:{fontSize:"10px",color:"#333333"}}},yAxis:[{title:{text:"\uc0ac\uc6a9\uc790 \uc218",style:{fontSize:"10px",fontWeight:"bold",color:"#333333"}},labels:{style:{fontSize:"9px",color:"#333333"}},opposite:!1},{title:{text:"\uc870\ud68c\uc218",style:{fontSize:"10px",fontWeight:"bold",color:"#333333"}},labels:{style:{fontSize:"9px",color:"#333333"}},opposite:!0}],plotOptions:{line:{dataLabels:{enabled:!0},enableMouseTracking:!1,lineWidth:2.5}},series:[{name:"\uc2e4\uc0ac\uc6a9\uc790 \uc218",data:t["\uc2e4\uc0ac\uc6a9\uc790 \uc218"],yAxis:0,color:"#FF0000"},{name:"\ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790 \uc218",data:t["\ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790 \uc218"],yAxis:0,color:"#FF7F00"},{name:"\ud65c\uc131 \uc0ac\uc6a9\uc790 \uc218",data:t["\ud65c\uc131 \uc0ac\uc6a9\uc790 \uc218"],yAxis:0,color:"#FFD700"},{name:"\uc870\ud68c\uc218",data:t["\uc870\ud68c\uc218"],yAxis:1,color:"#1a75ff"}]};return(0,m.jsx)(x(),{highcharts:f(),options:n})};return(0,i.useEffect)((()=>{c&&g.current&&(g.current.innerHTML="",new h.rj({columns:Object.keys(c),data:c["\uc21c\uc704"].map(((e,t)=>Object.keys(c).map((e=>c[e][t])))),pagination:{enabled:!0,limit:8,summary:!1},search:!1,style:{table:{borderCollapse:"collapse",width:"100%",border:"1px solid #ccc"},th:{padding:"11px 13px 11px 19.5px",backgroundColor:"#f0f0f0",border:"1px solid #ccc",color:"#444",fontWeight:"600"},tr:{backgroundColor:"#fff"},td:{padding:"11px 13px 11px 19.5px",border:"1px solid #ccc",color:"#333",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}}}).render(g.current))}),[c]),(0,i.useEffect)((()=>{(0,l.CheckToken)();const e=document.querySelector("header");e&&(e.style.display="none");const t=document.querySelector("footer");t&&(t.style.display="none");const n=document.querySelector("html");n&&(n.style.margin="0px");const o=document.querySelector("body");o&&(o.style.display="flex",o.style.flexDirection="column",o.style.justifyContent="center",o.style.alignItems="center",o.style.height="100vh")}),[]),(0,m.jsxs)(b,{children:[(0,m.jsx)(w,{children:(0,m.jsx)("h1",{children:"[ \uc628\ub77c\uc778 \uba54\ubaa8\uc7a5 - Back Office ]"})}),(0,m.jsx)("br",{}),(0,m.jsxs)("div",{style:{position:"relative",width:"76%",maxHeight:"500px",marginLeft:"4px",marginBottom:"2px",border:"1px solid #ccc",borderRadius:"3px"},children:[(0,m.jsxs)(y,{children:[(0,m.jsxs)("div",{children:["\uac00\uc785\uc790: ",t,"\uba85"]}),",\xa0",(0,m.jsxs)("div",{children:["\ud0c8\ud1f4\uc790: ",o,"\uba85"]})]}),s&&(0,m.jsx)(k,{columns:s,style:{width:"100%",height:"100%"}})]}),(0,m.jsx)("div",{ref:g,style:{width:"76%"}}),(0,m.jsxs)("button",{id:"logoutButton",onClick:()=>{(0,p._1)({title:"\ub85c\uadf8\uc544\uc6c3 \ud655\uc778",message:"\uc815\ub9d0 \ub85c\uadf8\uc544\uc6c3 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",buttons:[{label:"\uc608",onClick:()=>{localStorage.clear(),sessionStorage.clear(),window.location.href="/login"}},{label:"\uc544\ub2c8\uc624",onClick:()=>{}}]})},children:["\ub85c\uadf8\uc544\uc6c3 ",(0,m.jsx)("i",{className:"fa fa-sign-out","aria-hidden":"true"})]})]})}},61:(e,t,n)=>{function o(){const e=localStorage.getItem("accessToken"),t=localStorage.getItem("refreshToken");e&&t||(window.location.href="/login")}n.r(t),n.d(t,{CheckToken:()=>o})}}]);