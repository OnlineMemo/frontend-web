"use strict";(self.webpackChunkonlinememo_react_project=self.webpackChunkonlinememo_react_project||[]).push([[211],{211:(e,o,t)=>{t.r(o),t.d(o,{default:()=>r});var a=t(39610);const s=a.Z.create({baseURL:"https://api.onlinememo.kr"});function n(){const e=window.location.pathname;"/"!==e&&"/login"!==e&&(window.location.href="/login")}s.interceptors.request.use((function(e){const o=localStorage.getItem("accessToken");return o&&(e.headers.Authorization="Bearer ".concat(o)),e})),s.interceptors.response.use((function(e){return e}),(async function(e){var o,t,r,c,l,i;const u=e.config,d={accessToken:localStorage.getItem("accessToken"),refreshToken:localStorage.getItem("refreshToken")};if(401===(null===(o=e.response)||void 0===o||null===(t=o.data)||void 0===t?void 0:t.status)&&"TOKEN_EXPIRED"===e.response.data.code&&"ERROR - JWT \ud1a0\ud070 \ub9cc\ub8cc \uc5d0\ub7ec"===e.response.data.message){try{const e=await a.Z.post("".concat("https://api.onlinememo.kr","/reissue"),d);if(e)return localStorage.setItem("accessToken",e.data.data.accessToken),localStorage.setItem("refreshToken",e.data.data.refreshToken),await s.request(u)}catch(e){console.error(e),localStorage.clear(),sessionStorage.clear(),n()}return Promise.reject(e)}return 401===(null===(r=e.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.status)?(localStorage.clear(),sessionStorage.clear(),n()):404===(null===(l=e.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.status)&&(window.location.href="/404"),Promise.reject(e)}));const r=s}}]);