"use strict";(self.webpackChunkonlinememo_react_project=self.webpackChunkonlinememo_react_project||[]).push([[6737,211,61,4201],{211:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var o=n(39610);const a=o.Z.create({baseURL:"https://api.onlinememo.kr"});function r(){const e=window.location.pathname;"/"!==e&&"/login"!==e&&(window.location.href="/login")}a.interceptors.request.use((function(e){const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e})),a.interceptors.response.use((function(e){return e}),(async function(e){var t,n,i,s,c,l;const d=e.config,p={accessToken:localStorage.getItem("accessToken"),refreshToken:localStorage.getItem("refreshToken")};if(401===(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.status)&&"TOKEN_EXPIRED"===e.response.data.code&&"ERROR - JWT \ud1a0\ud070 \ub9cc\ub8cc \uc5d0\ub7ec"===e.response.data.message){try{const e=await o.Z.post("".concat("https://api.onlinememo.kr","/reissue"),p);if(e)return localStorage.setItem("accessToken",e.data.data.accessToken),localStorage.setItem("refreshToken",e.data.data.refreshToken),await a.request(d)}catch(e){console.error(e),localStorage.clear(),sessionStorage.clear(),r()}return Promise.reject(e)}return 401===(null===(i=e.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.status)?(localStorage.clear(),sessionStorage.clear(),r()):404===(null===(c=e.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.status)&&(window.location.href="/404"),Promise.reject(e)}));const i=a},56737:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});var o,a,r,i,s=n(30168),c=n(47313),l=n(70244),d=(n(80281),n(60061)),p=n(34201),u=n(211),g=n(5845),f=n.n(g),x=n(97548),h=n.n(x),m=n(46868),b=(n(31105),n(61378)),w=n.n(b),y=(n(72632),n(32600)),S=(n(76419),n(46417));const k=l.ZP.div(o||(o=(0,s.Z)(['\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n\n    width: 100%;\n    height: calc(100vh - 12px - 23px);  // 100vh - paddingTop - paddingBottom\n    padding-top: 12px;\n    padding-bottom: 23px;\n    overflow: auto;\n\n    background-color: #f4f3ee;\n    font-family: "jua";\n    font-size: 15px;\n\n    @media(max-width: 650px) {\n        zoom: 50%;\n        overflow: visible;\n    }\n\n    h1 {\n        margin-top: 12px;\n        margin-bottom: 14px;\n        font-size: 27px;\n        color: #463f3a;\n    }\n\n    #customContainer {\n        position: fixed;\n        top: 10.5px;\n        right: 100px;\n        padding: 6px 10px;\n        background-color: #c4b8b2;\n        border-radius: 4px;\n        font-size: 13px;\n        font-weight: 700;\n        color: #463f3a;\n        z-index: 998;\n\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n        align-items: center;\n        height: 16px;\n    }\n\n    #logoutButton {\n        position: fixed;\n        top: 10.5px;\n        right: 10.5px;\n        padding: 6px 10px;\n        background-color: #bcb8b1;\n        border: none;\n        border-radius: 4px;\n        font-size: 13px;\n        font-weight: 700;\n        color: #463f3a;\n        z-index: 998;\n\n        &:hover {\n            cursor: pointer;\n            background-color: #837a72;\n        }\n    }\n\n    // Grid CSS\n    .gridjs-footer {\n        padding: 9px 19px !important;\n    }\n\n    // DatePicker CSS\n    .react-datepicker {\n        top: 22px;\n        right: 2.6px;  // 6px\n\n        @media(max-width: 650px) {\n            top: 20.5px;\n            right: 35.5px;\n        }\n    }\n    .react-datepicker__triangle {\n        display: none;\n    }\n    .react-datepicker__day,\n    .react-datepicker__day-name {\n        @media(max-width: 650px) {\n            font-size: 9px;\n        }\n\n        &:hover {\n            background-color: #886b62a1 !important;\n        }\n    }\n    .react-datepicker__day--keyboard-selected,\n    .react-datepicker__day--in-range {\n        background-color: #463f3a !important;\n        color: white !important;\n    }\n    .react-datepicker__day--in-selecting-range {\n        background-color: #886b62a1 !important;\n        color: white !important;\n    }\n    \n    // Scroll CSS\n    &::-webkit-scrollbar {\n        width: 5px;\n        background-color: #f4f3ee;\n        border-radius: 4px;\n    }\n    &::-webkit-scrollbar-thumb {\n        background-color: #bcb8b1;\n        border-radius: 4px;\n    }\n']))),v=l.ZP.div(a||(a=(0,s.Z)(["\n    position: relative;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n\n    #userContainer {\n        position: absolute;\n        right: -185px;\n        padding: 5px 9px;\n        background-color: #c3c3c3aa;\n        border-radius: 4px;\n        font-size: 13px;\n        font-weight: 500;\n        color: #463f3a;\n\n        display: flex;\n        justify-content: center;\n        align-items: center;\n\n        @media(max-width: 650px) {\n            right: -142px;\n            flex-direction: column;\n        }\n\n        .hideMobile {\n            @media(max-width: 650px) {\n                display: none;\n            }\n        }\n    }\n"]))),C=l.ZP.div(r||(r=(0,s.Z)(["\n    position: absolute;\n    top: 7.5px;\n    right: 11px;\n\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    z-index: 999;\n"]))),D=(0,l.ZP)(w())(i||(i=(0,s.Z)(["\n    width: 135.69px;\n    padding-top: 2px;\n    padding-left: 5.5px;\n    text-align: center;\n    font-size: 12px;\n    font-weight: 600;\n    color: #463f3a;\n\n    background: linear-gradient(145deg, #f4f3eeaa, #e0ded7aa);\n    box-shadow: 2px 2px 4px #c0bcb6, -2px -2px 4px #ffffff;\n    transition: all 0.13s ease-in-out;\n    border: 1px solid #bcb8b1;\n    border-radius: 3px;\n    cursor: pointer;\n    caret-color: transparent;\n\n    @media(max-width: 650px) {\n        // \ubaa8\ubc14\uc77c iOS \ud654\uba74 \uc790\ub3d9\ud655\ub300 \ubc29\uc9c0\n        width: calc(135.69px / 0.53);\n        height: 22.4px;\n        padding-top: 2px;\n        padding-right: 0px;\n        padding-bottom: 2px;\n        font-size: 16px;  // 8.5px\n        transform: scale(0.53); \n        transform-origin: top right;\n    }\n\n    &:hover {\n        background: linear-gradient(145deg, #f4f3ee, #e0ded7);\n        box-shadow: 2px 2px 6px #c0bcb6, -2px -2px 6px #ffffff;\n    }\n\n    &:focus {\n        box-shadow: 0 0 5px rgba(131, 122, 114, 0.6);\n        outline: none;\n        border-color: #837a72;\n    }\n"])));const j=function(e){const[t,n]=(0,c.useState)([(0,p.getKSTDate)("2025-08-01","00:00:00"),(0,p.getKSTDate)("2025-08-31","00:00:00")]),[o,a]=t,[r,i]=(0,c.useState)([(0,p.getKSTDate)("2025-08-01","00:00:00"),(0,p.getKSTDate)("2025-08-31","00:00:00")]),[s,l]=r,[g,x]=(0,c.useState)(0),[b,w]=(0,c.useState)(0),[j,T]=(0,c.useState)(null),[z,_]=(0,c.useState)(null),[M,I]=(0,c.useState)(0),U=(0,c.useRef)(null),E=(e,t)=>{const n="".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0"));return"".concat(n," ").concat(t)};(0,c.useEffect)((()=>{!async function(){await u.default.get("/back-office/users/statistics").then((e=>{const t=e.data.data;x(t.signupUserCount),w(t.withdrawnUserCount)})).catch((e=>{}))}()}),[]),(0,c.useEffect)((()=>{s&&l&&(0!==M&&o.getTime()===s.getTime()&&a.getTime()===l.getTime()||(!async function(){const e=E(s,"00:00:00"),t=E(l,"23:59:59");await u.default.get("/back-office/ga4/calc-data",{params:{startDatetime:e,endDatetime:t}}).then((e=>{const t=e.data.data,n=new Map,o=new Map,a=new Map,r=new Map,i=new Map,s=new Map;t.forEach((e=>{const t=e.eventDatetime.slice(0,10),[c,l,d]=t.split("-");n.has(t)||(n.set(t,{year:c,month:l,day:d,yearSuffix:c.slice(2,4)}),o.set(t,new Set),a.set(t,new Set),r.set(t,0),i.set(t,new Set),s.set(t,new Set));const p=e.loginUserId,u=e.userPseudoId;p>0&&(o.get(t).add(p),i.get(t).add(u)),a.get(t).add(u),r.set(t,r.get(t)+1)})),t.forEach((e=>{const t=e.eventDatetime.slice(0,10),n=e.loginUserId,o=e.userPseudoId;0!==n||i.get(t).has(o)||s.get(t).add(o)}));const c=[];for(const d of n.keys()){const e=n.get(d),t=o.get(d).size,i=a.get(d).size,l=s.get(d).size+t,p=r.get(d);c.push({dateInfo:e,uniqueUserCount:l,loginUserCount:t,activeUserCount:i,pageViewCount:p})}const l=Object.fromEntries([["\ub0a0\uc9dc",e=>"".concat(e.dateInfo.month,"/").concat(e.dateInfo.day)],["\uc2e4\uc0ac\uc6a9\uc790 \uc218",e=>e.uniqueUserCount],["\ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790 \uc218",e=>e.loginUserCount],["\ud65c\uc131 \uc0ac\uc6a9\uc790 \uc218",e=>e.activeUserCount],["\uc870\ud68c\uc218",e=>e.pageViewCount]].map((e=>{let[t,n]=e;return[t,c.map(n)]})));T(l)})).catch((e=>{}))}(),async function(){const e=E(s,"00:00:00"),t=E(l,"23:59:59");await u.default.get("/back-office/ga4/statistics",{params:{startDatetime:e,endDatetime:t}}).then((e=>{const t=e.data.data,n=Object.fromEntries([["\uc21c\uc704",(e,t)=>t+1],["\ud398\uc774\uc9c0 \uacbd\ub85c",e=>e.pagePath],["\uc2e4\uc0ac\uc6a9\uc790 \uc218",e=>e.uniqueUserCount],["\ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790 \uc218",e=>e.loginUserCount],["\ud65c\uc131 \uc0ac\uc6a9\uc790 \uc218",e=>e.activeUserCount],["\uc870\ud68c\uc218",e=>e.pageViewCount],["\ubbf8\uc778\uc99d \uc811\uadfc \ucc28\ub2e8",e=>e.unauthBlockedCount]].map((e=>{let[n,o]=e;return[n,t.map(o)]})));_(n),I((e=>e+1))})).catch((e=>{}))}(),n([s,l])))}),[s,l]);const F=(0,c.useMemo)((()=>{if(!j)return null;return{chart:{type:"line"},credits:{enabled:!1},title:{text:"\uc77c\ubcc4 \uc0ac\uc6a9\uc790 \ud1b5\uacc4",style:{fontSize:"14px",color:"#333333"}},subtitle:{text:'<a href="https://onlinememo.kr" target="_blank">www.OnlineMemo.kr</a>',style:{fontSize:"9px"}},xAxis:{categories:j["\ub0a0\uc9dc"],labels:{style:{fontSize:"10px",color:"#333333"}}},yAxis:[{title:{text:"\uc0ac\uc6a9\uc790 \uc218",style:{fontSize:"10px",fontWeight:"bold",color:"#333333"}},labels:{style:{fontSize:"9px",color:"#333333"}},opposite:!1},{title:{text:"\uc870\ud68c\uc218",style:{fontSize:"10px",fontWeight:"bold",color:"#333333"}},labels:{style:{fontSize:"9px",color:"#333333"}},opposite:!0}],plotOptions:{line:{dataLabels:{enabled:!0},enableMouseTracking:!1,lineWidth:2.5}},series:[{name:"\uc2e4\uc0ac\uc6a9\uc790 \uc218",data:j["\uc2e4\uc0ac\uc6a9\uc790 \uc218"],yAxis:0,color:"#FF0000"},{name:"\ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790 \uc218",data:j["\ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790 \uc218"],yAxis:0,color:"#FF7F00"},{name:"\ud65c\uc131 \uc0ac\uc6a9\uc790 \uc218",data:j["\ud65c\uc131 \uc0ac\uc6a9\uc790 \uc218"],yAxis:0,color:"#FFD700"},{name:"\uc870\ud68c\uc218",data:j["\uc870\ud68c\uc218"],yAxis:1,color:"#1a75ff"}]}}),[j]);return(0,c.useEffect)((()=>{z&&U.current&&(U.current.innerHTML="",new m.rj({columns:Object.keys(z),data:z["\uc21c\uc704"].map(((e,t)=>Object.keys(z).map((e=>z[e][t])))),pagination:{enabled:!0,limit:8,summary:!1},search:!1,style:{table:{borderCollapse:"collapse",width:"100%",border:"1px solid #ccc"},th:{padding:"11px 13px 11px 19.5px",backgroundColor:"#f0f0f0",border:"1px solid #ccc",color:"#444",fontWeight:"600"},tr:{backgroundColor:"#fff"},td:{padding:"11px 13px 11px 19.5px",border:"1px solid #ccc",color:"#333",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}}}).render(U.current))}),[z]),(0,c.useEffect)((()=>{(0,d.CheckToken)();const e=document.querySelector("header");e&&(e.style.display="none");const t=document.querySelector("footer");t&&(t.style.display="none");const n=document.querySelector("html");n&&(n.style.margin="0px");const o=document.querySelector("body");o&&(o.style.display="flex",o.style.flexDirection="column",o.style.justifyContent="center",o.style.alignItems="center",o.style.height="100vh");const a=()=>{const e=document.querySelector("html"),t=document.querySelector("body");window.innerWidth<=650?(e&&(e.style.overflowX="hidden"),t&&(t.style.overflowX="hidden")):(e&&(e.style.overflowX=""),t&&(t.style.overflowX=""))};return a(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}}),[]),(0,S.jsxs)(k,{children:[(0,S.jsxs)(v,{children:[(0,S.jsx)("h1",{children:"[ \uc628\ub77c\uc778 \uba54\ubaa8\uc7a5 - Back Office ]"}),(0,S.jsxs)("div",{id:"userContainer",children:[(0,S.jsxs)("div",{children:["\uac00\uc785\uc790: ",g,"\uba85"]}),(0,S.jsx)("div",{className:"hideMobile",children:",\xa0"}),(0,S.jsxs)("div",{children:["\ud0c8\ud1f4\uc790: ",b,"\uba85"]})]})]}),(0,S.jsx)("br",{}),(0,S.jsxs)("div",{style:{position:"relative",width:"76%",maxHeight:"500px",marginLeft:"4px",marginBottom:"2px",border:"1px solid #ccc",borderRadius:"3px"},children:[(0,S.jsx)(C,{children:(0,S.jsx)(D,{selectsRange:!0,shouldCloseOnSelect:!0,onChange:e=>i(e),minDate:(0,p.getKSTDate)("2025-08-01","00:00:00"),maxDate:(()=>{const e=(0,p.getKSTDateFromLocal)(new Date),t=e.getHours(),n=e.getMinutes();return t>15||15===t&&n>=1?e.setDate(e.getDate()-1):e.setDate(e.getDate()-2),e})(),startDate:s,endDate:l,value:(()=>{const e=s?"".concat(String(s.getFullYear()).slice(2,4),".").concat(String(s.getMonth()+1).padStart(2,"0"),".").concat(String(s.getDate()).padStart(2,"0")):"\ubbf8\uc120\ud0dd",t=l?"".concat(String(l.getFullYear()).slice(2,4),".").concat(String(l.getMonth()+1).padStart(2,"0"),".").concat(String(l.getDate()).padStart(2,"0")):"\ubbf8\uc120\ud0dd";return"".concat(e," ~ ").concat(t,"  \ud83d\udcc6")})(),onFocus:e=>e.target.blur(),popperPlacement:"bottom-start",popperModifiers:[{name:"flip",options:{fallbackPlacements:[]}},{name:"preventOverflow",options:{tether:!1}}]})}),F&&(0,S.jsx)(h(),{highcharts:f(),options:F,style:{width:"100%",height:"100%"}})]}),(0,S.jsx)("div",{ref:U,style:{width:"76%",minHeight:"398px",backgroundColor:"#f4f3ee"}},M),(0,S.jsxs)("button",{id:"logoutButton",onClick:()=>{(0,y._1)({title:"\ub85c\uadf8\uc544\uc6c3 \ud655\uc778",message:"\uc815\ub9d0 \ub85c\uadf8\uc544\uc6c3 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",buttons:[{label:"\uc608",onClick:()=>{localStorage.clear(),sessionStorage.clear(),window.location.href="/login"}},{label:"\uc544\ub2c8\uc624",onClick:()=>{}}]})},children:["\ub85c\uadf8\uc544\uc6c3 ",(0,S.jsx)("i",{className:"fa fa-sign-out","aria-hidden":"true"})]})]})}},60061:(e,t,n)=>{function o(){const e=localStorage.getItem("accessToken"),t=localStorage.getItem("refreshToken");e&&t||(window.location.href="/login")}n.r(t),n.d(t,{CheckToken:()=>o})},34201:(e,t,n)=>{n.r(t),n.d(t,{getKSTDate:()=>o,getKSTDateFromLocal:()=>a});const o=(e,t)=>{const[n,o,a]=e.split("-").map(Number),[r,i,s]=t.split(":").map(Number);return new Date(Date.UTC(n,o-1,a,r,i,s)-324e5)},a=e=>new Date(e.toLocaleString("en-US",{timeZone:"Asia/Seoul"}))}}]);