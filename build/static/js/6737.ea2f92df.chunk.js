"use strict";(self.webpackChunkonlinememo_react_project=self.webpackChunkonlinememo_react_project||[]).push([[6737],{56737:(n,e,t)=>{t.r(e),t.d(e,{default:()=>P});var o,a,i,r,c,s,d,l=t(30168),p=t(47313),x=t(58467),g=t(70244),u=t(69532),f=t(34201),h=t(79942),m=t(9282),b=t(5845),w=t.n(b),y=t(97548),S=t.n(y),k=t(46868),v=(t(31105),t(61378)),C=t.n(v),j=(t(72632),t(46417));const D=g.ZP.div(o||(o=(0,l.Z)(['\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n\n    width: 100%;\n    height: calc(100vh - 12px - 23px);  // 100vh - paddingTop - paddingBottom\n    padding-top: 12px;\n    padding-bottom: 23px;\n    overflow: auto;\n\n    background-color: #f4f3ee;\n    font-family: "jua";\n    font-size: 15px;\n\n    @media(max-width: 650px) {\n        zoom: 50%;\n        overflow: visible;\n    }\n\n    h1 {\n        margin-top: 12px;\n        margin-bottom: 14px;\n        font-size: 27px;\n        color: #463f3a;\n    }\n\n    /* #customContainer {\n        position: fixed;\n        top: 10.5px;\n        right: 100px;\n        padding: 6px 10px;\n        background-color: #c4b8b2;\n        border-radius: 4px;\n        font-size: 13px;\n        font-weight: 700;\n        color: #463f3a;\n        z-index: 998;\n\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n        align-items: center;\n        height: 16px;\n    } */\n\n    #logoutButton {\n        position: fixed;\n        top: 10.5px;\n        right: 10.5px;\n        padding: 6px 10px;\n        background-color: #bcb8b1;\n        border: none;\n        border-radius: 4px;\n        font-size: 13px;\n        font-weight: 700;\n        color: #463f3a;\n        z-index: 998;\n\n        &:hover {\n            cursor: pointer;\n            background-color: #837a72;\n        }\n    }\n\n    // Grid CSS\n    .gridjs-footer {\n        padding: 9px 19px !important;\n    }\n\n    // DatePicker CSS\n    .react-datepicker {\n        top: 22px;\n        right: 2.6px;  // 6px\n\n        @media(max-width: 650px) {\n            top: 20.5px;\n            right: 35.5px;\n        }\n    }\n    .react-datepicker__triangle {\n        display: none;\n    }\n    .react-datepicker__day,\n    .react-datepicker__day-name {\n        @media(max-width: 650px) {\n            font-size: 9px;\n        }\n\n        &:hover {\n            background-color: #886b62a1 !important;\n        }\n    }\n    .react-datepicker__day--keyboard-selected,\n    .react-datepicker__day--in-range {\n        background-color: #463f3a !important;\n        color: white !important;\n    }\n    .react-datepicker__day--in-selecting-range {\n        background-color: #886b62a1 !important;\n        color: white !important;\n    }\n    \n    // Scroll CSS\n    &::-webkit-scrollbar {\n        width: 5px;\n        background-color: #f4f3ee;\n        border-radius: 4px;\n    }\n    &::-webkit-scrollbar-thumb {\n        background-color: #bcb8b1;\n        border-radius: 4px;\n    }\n']))),z=g.ZP.div(a||(a=(0,l.Z)(["\n    position: relative;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n\n    #userContainer {\n        position: absolute;\n        right: -185px;\n        padding: 5px 9px;\n        background-color: #c3c3c3aa;\n        border-radius: 4px;\n        font-size: 13px;\n        font-weight: 500;\n        color: #463f3a;\n\n        display: flex;\n        justify-content: center;\n        align-items: center;\n\n        @media(max-width: 650px) {\n            right: -142px;\n            flex-direction: column;\n        }\n\n        .hideMobile {\n            @media(max-width: 650px) {\n                display: none;\n            }\n        }\n    }\n"]))),M=g.ZP.div(i||(i=(0,l.Z)(["\n    position: absolute;\n    top: 7.5px;\n    right: 11px;\n\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    z-index: 999;\n"]))),T=(0,g.ZP)(C())(r||(r=(0,l.Z)(["\n    width: 135.69px;\n    padding-top: 2px;\n    padding-left: 5.5px;\n    text-align: center;\n    font-size: 12px;\n    font-weight: 600;\n    color: #463f3a;\n\n    background: linear-gradient(145deg, #f4f3eeaa, #e0ded7aa);\n    box-shadow: 2px 2px 4px #c0bcb6, -2px -2px 4px #ffffff;\n    transition: all 0.13s ease-in-out;\n    border: 1px solid #bcb8b1;\n    border-radius: 3px;\n    cursor: pointer;\n    caret-color: transparent;\n\n    @media(max-width: 650px) {\n        // \ubaa8\ubc14\uc77c iOS \ud654\uba74 \uc790\ub3d9\ud655\ub300 \ubc29\uc9c0\n        width: calc(135.69px / 0.53);\n        height: 22.4px;\n        padding-top: 2px;\n        padding-right: 0px;\n        padding-bottom: 2px;\n        font-size: 16px;  // 8.5px\n        transform: scale(0.53); \n        transform-origin: top right;\n    }\n\n    &:hover {\n        background: linear-gradient(145deg, #f4f3ee, #e0ded7);\n        box-shadow: 2px 2px 6px #c0bcb6, -2px -2px 6px #ffffff;\n    }\n\n    &:focus {\n        box-shadow: 0 0 5px rgba(131, 122, 114, 0.6);\n        outline: none;\n        border-color: #837a72;\n    }\n"]))),_=g.ZP.div(c||(c=(0,l.Z)(["\n    position: absolute;\n    top: calc(6.35px + 22px + 3.6px);\n    right: calc(11px + 2.6px + 148px);\n    display: ",";\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n\n    width: 48px;\n    // height: calc(170.688px - 7.2px - 13px);\n    padding: 7.7px 2.5px 7.7px 4px;\n    background: #f0f0f0;\n    border: 1px solid #aeaeae;\n    border-radius: 0.3rem;\n    z-index: 999;\n\n    /* @media(max-width: 650px) {\n        top: calc(6.35px + 20.5px + 3.9px);\n        right: calc(11px + 35.5px);\n    } */\n\n    @media(max-width: 650px) {\n        top: calc(9.6px + 20.5px + 3.9px);\n        right: calc((11px + 2.6px + 148px) * 2 - 7px);\n\n        width: calc(48px * 2);\n        // height: calc((170.688px - 7.2px - 13px) * 2 - 13px);\n        padding: calc(7.7px * 2) calc(2.5px * 2) calc(7.7px * 2) calc(4px * 2);\n        border: calc(1px * 2) solid #aeaeae;\n    }\n"])),(n=>n.shortcutOn?"flex":"none")),F=g.ZP.div(s||(s=(0,l.Z)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n    gap: 4px;\n\n    padding-left: 3px;\n    padding-right: 4px;\n    overflow-x: hidden;\n    overflow-y: auto;\n\n    &::-webkit-scrollbar {\n        width: 2.5px;\n        background-color: transparent;\n        border-radius: 4px;\n    }\n    &::-webkit-scrollbar-thumb {\n        background-color: #bcb8b1;\n        border-radius: 4px;\n    }\n\n    @media(max-width: 650px) {\n        gap: calc(4px * 2);\n\n        padding-left: calc(3px * 2 + 2px);\n        padding-right: calc(4px * 2 + 2px);\n\n        &::-webkit-scrollbar {\n            width: calc(2.5px * 2);\n        }\n    }\n"]))),O=g.ZP.button(d||(d=(0,l.Z)(['\n    width: 43.5px;\n    padding-top: 3.2px;\n    padding-bottom: 3.2px;\n    background-color: #463f3a;\n    border: 0.8px solid #858080;\n    border-radius: 0.3rem;\n\n    font-family: "jua";\n    font-size: 12px;\n    color: white;\n    cursor: pointer;\n\n    @media(max-width: 650px) {\n        width: calc(43.5px * 2);\n        padding-top: calc(3.2px * 2);\n        padding-bottom: calc(3.2px * 2);\n        border: calc(0.8px * 2 - 0.3px) solid #858080;\n    }\n\n    &:hover {\n        background-color: #886b62a1;\n    }\n'])));const P=function(n){const e=(0,x.TH)(),[t,o]=(0,p.useState)((()=>"false"!==new URLSearchParams(e.search).get("excludeDdos"))),[a,i]=(0,p.useState)([(0,f.getKSTDate)("2025-08-01","00:00:00"),(0,f.getKSTDate)("2025-08-31","00:00:00")]),[r,c]=a,[s,d]=(0,p.useState)([(0,f.getKSTDate)("2025-08-01","00:00:00"),(0,f.getKSTDate)("2025-08-31","00:00:00")]),[l,g]=s,[b,y]=(0,p.useState)(!1),[v,C]=(0,p.useState)(0),[P,U]=(0,p.useState)(0),[Z,E]=(0,p.useState)(null),[q,I]=(0,p.useState)(null),[K,L]=(0,p.useState)(0),A=(0,p.useRef)(null),B=()=>{const n=(0,f.getKSTDateFromLocal)(new Date),e=n.getHours(),t=n.getMinutes();return e>15||15===e&&t>=1?n.setDate(n.getDate()-1):n.setDate(n.getDate()-2),n},H=(n,e)=>{const t="".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0"),"-").concat(String(n.getDate()).padStart(2,"0"));return"".concat(t," ").concat(e)},R=(()=>{const n=(0,f.getKSTDate)("2025-08-01","00:00:00"),e=B(),t=[];for(;n<=e;){const e=String(n.getFullYear()).slice(-2),o=String(n.getMonth()+1).padStart(2,"0");t.push("".concat(e,".").concat(o)),n.setMonth(n.getMonth()+1)}return t})(),W=(0,j.jsx)(F,{children:R.map(((n,e)=>(0,j.jsx)(O,{onMouseDown:()=>(n=>{const e=R[n],t="20".concat(e.slice(0,2)),o=e.slice(3,5);let a=null;a=n!==R.length-1?new Date(Number(t),Number(o),0).getDate():B().getDate(),d([(0,f.getKSTDate)("".concat(t,"-").concat(o,"-01"),"00:00:00"),(0,f.getKSTDate)("".concat(t,"-").concat(o,"-").concat(String(a).padStart(2,"0")),"00:00:00")])})(e),children:n},e)))});(0,p.useEffect)((()=>{!async function(){await m.default.get("/back-office/users/statistics").then((n=>{const e=n.data.data;C(e.signupUserCount),U(e.withdrawnUserCount)})).catch((n=>{}))}()}),[]),(0,p.useEffect)((()=>{l&&g&&(0!==K&&r.getTime()===l.getTime()&&c.getTime()===g.getTime()||(!async function(){const n=H(l,"00:00:00"),e=H(g,"23:59:59");await m.default.get("/back-office/ga4/dashboard",{params:{startDatetime:n,endDatetime:e,excludeDdos:t}}).then((n=>{const e=n.data.data,{calcResponseDtoList:t,statisticResponseDtoList:o}=e;N(t),X(o)})).catch((n=>{}))}(),i([l,g])))}),[l,g]);const N=n=>{const e=new Map,t=new Map,o=new Map,a=new Map,i=new Map,r=new Map;n.forEach((n=>{const c=n.eventDatetime.slice(0,10),[s,d,l]=c.split("-");e.has(c)||(e.set(c,{year:s,month:d,day:l,yearSuffix:s.slice(2,4)}),t.set(c,new Set),o.set(c,new Set),a.set(c,0),i.set(c,new Set),r.set(c,new Set));const p=n.loginUserId,x=n.userPseudoId;p>0&&(t.get(c).add(p),i.get(c).add(x)),o.get(c).add(x),a.set(c,a.get(c)+1)})),n.forEach((n=>{const e=n.eventDatetime.slice(0,10),t=n.loginUserId,o=n.userPseudoId;0!==t||i.get(e).has(o)||r.get(e).add(o)}));const c=[];for(const d of e.keys()){const n=e.get(d),i=t.get(d).size,s=o.get(d).size,l=r.get(d).size+i,p=a.get(d);c.push({dateInfo:n,uniqueUserCount:l,loginUserCount:i,activeUserCount:s,pageViewCount:p})}const s=Object.fromEntries([["\ub0a0\uc9dc",n=>"".concat(n.dateInfo.month,"/").concat(n.dateInfo.day)],["\uc2e4\uc0ac\uc6a9\uc790 \uc218",n=>n.uniqueUserCount],["\ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790 \uc218",n=>n.loginUserCount],["\ud65c\uc131 \uc0ac\uc6a9\uc790 \uc218",n=>n.activeUserCount],["\uc870\ud68c\uc218",n=>n.pageViewCount]].map((n=>{let[e,t]=n;return[e,c.map(t)]})));E(s)},X=n=>{const e=Object.fromEntries([["\uc21c\uc704",(n,e)=>e+1],["\ud398\uc774\uc9c0 \uacbd\ub85c",n=>n.pagePath],["\uc2e4\uc0ac\uc6a9\uc790 \uc218",n=>n.uniqueUserCount],["\ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790 \uc218",n=>n.loginUserCount],["\ud65c\uc131 \uc0ac\uc6a9\uc790 \uc218",n=>n.activeUserCount],["\uc870\ud68c\uc218",n=>n.pageViewCount],["\ubbf8\uc778\uc99d \uc811\uadfc \ucc28\ub2e8",n=>n.unauthBlockedCount]].map((e=>{let[t,o]=e;return[t,n.map(o)]})));I(e),L((n=>n+1))},Y=(0,p.useMemo)((()=>{if(!Z)return null;return{chart:{type:"line"},credits:{enabled:!1},title:{text:"\uc77c\ubcc4 \uc0ac\uc6a9\uc790 \ud1b5\uacc4",style:{fontSize:"14px",color:"#333333"}},subtitle:{text:'<a href="https://onlinememo.kr" target="_blank">www.OnlineMemo.kr</a>',style:{fontSize:"9px"}},xAxis:{categories:Z["\ub0a0\uc9dc"],labels:{style:{fontSize:"10px",color:"#333333"}}},yAxis:[{title:{text:"\uc0ac\uc6a9\uc790 \uc218",style:{fontSize:"10px",fontWeight:"bold",color:"#333333"}},labels:{style:{fontSize:"9px",color:"#333333"}},opposite:!1},{title:{text:"\uc870\ud68c\uc218",style:{fontSize:"10px",fontWeight:"bold",color:"#333333"}},labels:{style:{fontSize:"9px",color:"#333333"}},opposite:!0}],plotOptions:{line:{dataLabels:{enabled:!0,allowOverlap:!0,style:{fontSize:"7.6px"}},enableMouseTracking:!1,lineWidth:2.5}},series:[{name:"\uc2e4\uc0ac\uc6a9\uc790 \uc218",data:Z["\uc2e4\uc0ac\uc6a9\uc790 \uc218"],yAxis:0,color:"#FF0000"},{name:"\ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790 \uc218",data:Z["\ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790 \uc218"],yAxis:0,color:"#FF7F00"},{name:"\ud65c\uc131 \uc0ac\uc6a9\uc790 \uc218",data:Z["\ud65c\uc131 \uc0ac\uc6a9\uc790 \uc218"],yAxis:0,color:"#FFD700"},{name:"\uc870\ud68c\uc218",data:Z["\uc870\ud68c\uc218"],yAxis:1,color:"#1A75FF"}]}}),[Z]);(0,p.useEffect)((()=>{q&&A.current&&(A.current.innerHTML="",new k.rj({columns:Object.keys(q),data:q["\uc21c\uc704"].map(((n,e)=>Object.keys(q).map((n=>q[n][e])))),pagination:{enabled:!0,limit:8,summary:!1},search:!1,style:{table:{borderCollapse:"collapse",width:"100%",border:"1px solid #ccc"},th:{padding:"11px 13px 11px 19.5px",backgroundColor:"#f0f0f0",border:"1px solid #ccc",color:"#444",fontWeight:"600"},tr:{backgroundColor:"#fff"},td:{padding:"11px 13px 11px 19.5px",border:"1px solid #ccc",color:"#333",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}}}).render(A.current))}),[q]);const V=()=>{const n=document.querySelector("html"),e=document.querySelector("body");window.innerWidth<=650?(n&&(n.style.overflowX="hidden"),e&&(e.style.overflowX="hidden")):(n&&(n.style.overflowX=""),e&&(e.style.overflowX=""))},G=()=>{const n=document.querySelector(".react-datepicker"),e=document.getElementById("shortcutContainer");if(!n||!e)return;const t=window.innerWidth<=650?46:24;e.style.height="".concat(n.offsetHeight-t,"px")};return(0,p.useEffect)((()=>{(0,u.checkToken)();const n=document.querySelector("header");n&&(n.style.display="none");const e=document.querySelector("footer");e&&(e.style.display="none");const t=document.querySelector("html");t&&(t.style.margin="0px");const o=document.querySelector("body");return o&&(o.style.display="flex",o.style.flexDirection="column",o.style.justifyContent="center",o.style.alignItems="center",o.style.height="100vh"),V(),window.addEventListener("resize",V),()=>{window.removeEventListener("resize",V)}}),[]),(0,j.jsxs)(D,{role:"main",children:[(0,j.jsxs)(z,{children:[(0,j.jsx)("h1",{children:"[ \uc628\ub77c\uc778 \uba54\ubaa8\uc7a5 - Back Office ]"}),(0,j.jsxs)("div",{id:"userContainer",children:[(0,j.jsxs)("div",{children:["\uac00\uc785\uc790: ",v,"\uba85"]}),(0,j.jsx)("div",{className:"hideMobile",children:",\xa0"}),(0,j.jsxs)("div",{children:["\ud0c8\ud1f4\uc790: ",P,"\uba85"]})]})]}),(0,j.jsx)("br",{}),(0,j.jsxs)("div",{style:{position:"relative",width:"76%",maxHeight:"500px",marginLeft:"4px",marginBottom:"2px",border:"1px solid #ccc",borderRadius:"3px"},children:[(0,j.jsx)(M,{children:(0,j.jsx)(T,{selectsRange:!0,shouldCloseOnSelect:!0,onChange:n=>d(n),onCalendarOpen:()=>{y(!0),G()},onMonthChange:G,onCalendarClose:()=>y(!1),minDate:(0,f.getKSTDate)("2025-08-01","00:00:00"),maxDate:B(),startDate:l,endDate:g,value:(()=>{const n=l?"".concat(String(l.getFullYear()).slice(2,4),".").concat(String(l.getMonth()+1).padStart(2,"0"),".").concat(String(l.getDate()).padStart(2,"0")):"\ubbf8\uc120\ud0dd",e=g?"".concat(String(g.getFullYear()).slice(2,4),".").concat(String(g.getMonth()+1).padStart(2,"0"),".").concat(String(g.getDate()).padStart(2,"0")):"\ubbf8\uc120\ud0dd";return"".concat(n," ~ ").concat(e,"  \ud83d\udcc6")})(),onFocus:n=>n.target.blur(),popperPlacement:"bottom-start",popperModifiers:[{name:"flip",options:{fallbackPlacements:[]}},{name:"preventOverflow",options:{tether:!1}}]})}),(0,j.jsx)(_,{id:"shortcutContainer",className:"react-datepicker-ignore-onclickoutside",shortcutOn:b,children:W}),Y&&(0,j.jsx)(S(),{highcharts:w(),options:Y,style:{width:"100%",height:"100%"}})]}),(0,j.jsx)("div",{ref:A,style:{width:"76%",minHeight:"398px",backgroundColor:"#f4f3ee"}},K),(0,j.jsxs)("button",{id:"logoutButton",onClick:()=>{(0,h.showConfirmAlert)({title:"\ub85c\uadf8\uc544\uc6c3 \ud655\uc778",message:"\uc815\ub9d0 \ub85c\uadf8\uc544\uc6c3 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",buttons:[{label:"\uc608",onClick:()=>{(0,u.clearToken)(),window.location.href="/login"}},{label:"\uc544\ub2c8\uc624",onClick:()=>{}}]})},children:["\ub85c\uadf8\uc544\uc6c3 ",(0,j.jsx)("i",{className:"fa fa-sign-out","aria-hidden":"true"})]})]})}}}]);