"use strict";(self.webpackChunkonlinememo_react_project=self.webpackChunkonlinememo_react_project||[]).push([[6737,211,61],{211:(e,n,t)=>{t.r(n),t.d(n,{default:()=>i});var o=t(39610);const a=o.Z.create({baseURL:"https://api.onlinememo.kr"});function r(){const e=window.location.pathname;"/"!==e&&"/login"!==e&&(window.location.href="/login")}a.interceptors.request.use((function(e){const n=localStorage.getItem("accessToken");return n&&(e.headers.Authorization="Bearer ".concat(n)),e})),a.interceptors.response.use((function(e){return e}),(async function(e){var n,t,i,s,c,l;const d=e.config,p={accessToken:localStorage.getItem("accessToken"),refreshToken:localStorage.getItem("refreshToken")};if(401===(null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.status)&&"TOKEN_EXPIRED"===e.response.data.code&&"ERROR - JWT \ud1a0\ud070 \ub9cc\ub8cc \uc5d0\ub7ec"===e.response.data.message){try{const e=await o.Z.post("".concat("https://api.onlinememo.kr","/reissue"),p);if(e)return localStorage.setItem("accessToken",e.data.data.accessToken),localStorage.setItem("refreshToken",e.data.data.refreshToken),await a.request(d)}catch(e){console.error(e),localStorage.clear(),sessionStorage.clear(),r()}return Promise.reject(e)}return 401===(null===(i=e.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.status)?(localStorage.clear(),sessionStorage.clear(),r()):404===(null===(c=e.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.status)&&(window.location.href="/404"),Promise.reject(e)}));const i=a},56737:(e,n,t)=>{t.r(n),t.d(n,{default:()=>j});var o,a,r,i,s=t(30168),c=t(47313),l=t(70244),d=(t(80281),t(60061)),p=t(211),u=t(5845),g=t.n(u),f=t(97548),x=t.n(f),h=t(46868),m=(t(31105),t(61378)),b=t.n(m),w=(t(72632),t(32600)),y=(t(76419),t(46417));const S=l.ZP.div(o||(o=(0,s.Z)(['\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n\n    width: 100%;\n    height: calc(100vh - 12px - 23px);  // 100vh - paddingTop - paddingBottom\n    padding-top: 12px;\n    padding-bottom: 23px;\n    overflow: auto;\n\n    background-color: #f4f3ee;\n    font-family: "jua";\n    font-size: 15px;\n\n    @media(max-width: 650px) {\n        zoom: 50%;\n        overflow: visible;\n    }\n\n    h1 {\n        margin-top: 12px;\n        margin-bottom: 14px;\n        font-size: 27px;\n        color: #463f3a;\n    }\n\n    #customContainer {\n        position: fixed;\n        top: 10.5px;\n        right: 100px;\n        padding: 6px 10px;\n        background-color: #c4b8b2;\n        border-radius: 4px;\n        font-size: 13px;\n        font-weight: 700;\n        color: #463f3a;\n        z-index: 998;\n\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n        align-items: center;\n        height: 16px;\n    }\n\n    #logoutButton {\n        position: fixed;\n        top: 10.5px;\n        right: 10.5px;\n        padding: 6px 10px;\n        background-color: #bcb8b1;\n        border: none;\n        border-radius: 4px;\n        font-size: 13px;\n        font-weight: 700;\n        color: #463f3a;\n        z-index: 998;\n\n        &:hover {\n            cursor: pointer;\n            background-color: #837a72;\n        }\n    }\n\n    // Grid CSS\n    .gridjs-footer {\n        padding: 9px 19px !important;\n    }\n\n    // DatePicker CSS\n    .react-datepicker {\n        top: 22px;\n        right: 2.6px;  // 6px\n\n        @media(max-width: 650px) {\n            top: 20.5px;\n            right: 35.5px;\n        }\n    }\n    .react-datepicker__triangle {\n        display: none;\n    }\n    .react-datepicker__day,\n    .react-datepicker__day-name {\n        @media(max-width: 650px) {\n            font-size: 9px;\n        }\n\n        &:hover {\n            background-color: #886b62a1 !important;\n        }\n    }\n    .react-datepicker__day--keyboard-selected,\n    .react-datepicker__day--in-range {\n        background-color: #463f3a !important;\n        color: white !important;\n    }\n    .react-datepicker__day--in-selecting-range {\n        background-color: #886b62a1 !important;\n        color: white !important;\n    }\n    \n    // Scroll CSS\n    &::-webkit-scrollbar {\n        width: 5px;\n        background-color: #f4f3ee;\n        border-radius: 4px;\n    }\n    &::-webkit-scrollbar-thumb {\n        background-color: #bcb8b1;\n        border-radius: 4px;\n    }\n']))),k=l.ZP.div(a||(a=(0,s.Z)(["\n    position: relative;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n\n    #userContainer {\n        position: absolute;\n        right: -185px;\n        padding: 5px 9px;\n        background-color: #c3c3c3aa;\n        border-radius: 4px;\n        font-size: 13px;\n        font-weight: 500;\n        color: #463f3a;\n\n        display: flex;\n        justify-content: center;\n        align-items: center;\n\n        @media(max-width: 650px) {\n            right: -142px;\n            flex-direction: column;\n        }\n\n        .hideMobile {\n            @media(max-width: 650px) {\n                display: none;\n            }\n        }\n    }\n"]))),v=l.ZP.div(r||(r=(0,s.Z)(["\n    position: absolute;\n    top: 7.5px;\n    right: 11px;\n\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    z-index: 999;\n"]))),C=(0,l.ZP)(b())(i||(i=(0,s.Z)(["\n    width: 135.69px;\n    padding-top: 2px;\n    padding-left: 5.5px;\n    text-align: center;\n    font-size: 12px;\n    font-weight: 600;\n    color: #463f3a;\n\n    background: linear-gradient(145deg, #f4f3eeaa, #e0ded7aa);\n    box-shadow: 2px 2px 4px #c0bcb6, -2px -2px 4px #ffffff;\n    transition: all 0.13s ease-in-out;\n    border: 1px solid #bcb8b1;\n    border-radius: 3px;\n    cursor: pointer;\n    caret-color: transparent;\n\n    @media(max-width: 650px) {\n        // \ubaa8\ubc14\uc77c iOS \ud654\uba74 \uc790\ub3d9\ud655\ub300 \ubc29\uc9c0\n        width: calc(135.69px / 0.53);\n        height: 22.4px;\n        padding-top: 2px;\n        padding-right: 0px;\n        padding-bottom: 2px;\n        font-size: 16px;  // 8.5px\n        transform: scale(0.53); \n        transform-origin: top right;\n    }\n\n    &:hover {\n        background: linear-gradient(145deg, #f4f3ee, #e0ded7);\n        box-shadow: 2px 2px 6px #c0bcb6, -2px -2px 6px #ffffff;\n    }\n\n    &:focus {\n        box-shadow: 0 0 5px rgba(131, 122, 114, 0.6);\n        outline: none;\n        border-color: #837a72;\n    }\n"])));const j=function(e){const[n,t]=(0,c.useState)([new Date(new Date("2025-08-01").toLocaleString("en-US",{timeZone:"Asia/Seoul"})),new Date(new Date("2025-08-31").toLocaleString("en-US",{timeZone:"Asia/Seoul"}))]),[o,a]=n,[r,i]=(0,c.useState)(0),[s,l]=(0,c.useState)(0),[u,f]=(0,c.useState)(null),[m,b]=(0,c.useState)(null),[j,D]=(0,c.useState)(0),z=(0,c.useRef)(null),_=(e,n)=>{const t="".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0"));return"".concat(t," ").concat(n)};(0,c.useEffect)((()=>{!async function(){await p.default.get("/back-office/users/statistics").then((e=>{const n=e.data.data;i(n.signupUserCount),l(n.withdrawnUserCount)})).catch((e=>{}))}()}),[]),(0,c.useEffect)((()=>{o&&a&&(async function(){const e=_(o,"00:00:00"),n=_(a,"23:59:59");await p.default.get("/back-office/ga4/calc-data",{params:{startDatetime:e,endDatetime:n}}).then((e=>{const n=e.data.data,t=new Map,o=new Map,a=new Map,r=new Map,i=new Map,s=new Map;n.forEach((e=>{const n=e.eventDatetime.slice(0,10),[c,l,d]=n.split("-");t.has(n)||(t.set(n,{year:c,month:l,day:d,yearSuffix:c.slice(2,4)}),o.set(n,new Set),a.set(n,new Set),r.set(n,0),i.set(n,new Set),s.set(n,new Set));const p=e.loginUserId,u=e.userPseudoId;p>0&&(o.get(n).add(p),i.get(n).add(u)),a.get(n).add(u),r.set(n,r.get(n)+1)})),n.forEach((e=>{const n=e.eventDatetime.slice(0,10),t=e.loginUserId,o=e.userPseudoId;0!==t||i.get(n).has(o)||s.get(n).add(o)}));const c=[];for(const d of t.keys()){const e=t.get(d),n=o.get(d).size,i=a.get(d).size,l=s.get(d).size+n,p=r.get(d);c.push({dateInfo:e,uniqueUserCount:l,loginUserCount:n,activeUserCount:i,pageViewCount:p})}const l=Object.fromEntries([["\ub0a0\uc9dc",e=>"".concat(e.dateInfo.month,"/").concat(e.dateInfo.day)],["\uc2e4\uc0ac\uc6a9\uc790 \uc218",e=>e.uniqueUserCount],["\ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790 \uc218",e=>e.loginUserCount],["\ud65c\uc131 \uc0ac\uc6a9\uc790 \uc218",e=>e.activeUserCount],["\uc870\ud68c\uc218",e=>e.pageViewCount]].map((e=>{let[n,t]=e;return[n,c.map(t)]})));f(l)})).catch((e=>{}))}(),async function(){const e=_(o,"00:00:00"),n=_(a,"23:59:59");await p.default.get("/back-office/ga4/statistics",{params:{startDatetime:e,endDatetime:n}}).then((e=>{const n=e.data.data,t=Object.fromEntries([["\uc21c\uc704",(e,n)=>n+1],["\ud398\uc774\uc9c0 \uacbd\ub85c",e=>e.pagePath],["\uc2e4\uc0ac\uc6a9\uc790 \uc218",e=>e.uniqueUserCount],["\ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790 \uc218",e=>e.loginUserCount],["\ud65c\uc131 \uc0ac\uc6a9\uc790 \uc218",e=>e.activeUserCount],["\uc870\ud68c\uc218",e=>e.pageViewCount],["\ubbf8\uc778\uc99d \uc811\uadfc \ucc28\ub2e8",e=>e.unauthBlockedCount]].map((e=>{let[t,o]=e;return[t,n.map(o)]})));b(t),D((e=>e+1))})).catch((e=>{}))}())}),[o,a]);const T=(0,c.useMemo)((()=>{if(!u)return null;return{chart:{type:"line"},credits:{enabled:!1},title:{text:"\uc77c\ubcc4 \uc0ac\uc6a9\uc790 \ud1b5\uacc4",style:{fontSize:"14px",color:"#333333"}},subtitle:{text:'<a href="https://onlinememo.kr" target="_blank">www.OnlineMemo.kr</a>',style:{fontSize:"9px"}},xAxis:{categories:u["\ub0a0\uc9dc"],labels:{style:{fontSize:"10px",color:"#333333"}}},yAxis:[{title:{text:"\uc0ac\uc6a9\uc790 \uc218",style:{fontSize:"10px",fontWeight:"bold",color:"#333333"}},labels:{style:{fontSize:"9px",color:"#333333"}},opposite:!1},{title:{text:"\uc870\ud68c\uc218",style:{fontSize:"10px",fontWeight:"bold",color:"#333333"}},labels:{style:{fontSize:"9px",color:"#333333"}},opposite:!0}],plotOptions:{line:{dataLabels:{enabled:!0},enableMouseTracking:!1,lineWidth:2.5}},series:[{name:"\uc2e4\uc0ac\uc6a9\uc790 \uc218",data:u["\uc2e4\uc0ac\uc6a9\uc790 \uc218"],yAxis:0,color:"#FF0000"},{name:"\ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790 \uc218",data:u["\ub85c\uadf8\uc778 \uc0ac\uc6a9\uc790 \uc218"],yAxis:0,color:"#FF7F00"},{name:"\ud65c\uc131 \uc0ac\uc6a9\uc790 \uc218",data:u["\ud65c\uc131 \uc0ac\uc6a9\uc790 \uc218"],yAxis:0,color:"#FFD700"},{name:"\uc870\ud68c\uc218",data:u["\uc870\ud68c\uc218"],yAxis:1,color:"#1a75ff"}]}}),[u]);return(0,c.useEffect)((()=>{m&&z.current&&(z.current.innerHTML="",new h.rj({columns:Object.keys(m),data:m["\uc21c\uc704"].map(((e,n)=>Object.keys(m).map((e=>m[e][n])))),pagination:{enabled:!0,limit:8,summary:!1},search:!1,style:{table:{borderCollapse:"collapse",width:"100%",border:"1px solid #ccc"},th:{padding:"11px 13px 11px 19.5px",backgroundColor:"#f0f0f0",border:"1px solid #ccc",color:"#444",fontWeight:"600"},tr:{backgroundColor:"#fff"},td:{padding:"11px 13px 11px 19.5px",border:"1px solid #ccc",color:"#333",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}}}).render(z.current))}),[m]),(0,c.useEffect)((()=>{(0,d.CheckToken)();const e=document.querySelector("header");e&&(e.style.display="none");const n=document.querySelector("footer");n&&(n.style.display="none");const t=document.querySelector("html");t&&(t.style.margin="0px");const o=document.querySelector("body");o&&(o.style.display="flex",o.style.flexDirection="column",o.style.justifyContent="center",o.style.alignItems="center",o.style.height="100vh");const a=()=>{const e=document.querySelector("html"),n=document.querySelector("body");window.innerWidth<=650?(e&&(e.style.overflowX="hidden"),n&&(n.style.overflowX="hidden")):(e&&(e.style.overflowX=""),n&&(n.style.overflowX=""))};return a(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}}),[]),(0,y.jsxs)(S,{children:[(0,y.jsxs)(k,{children:[(0,y.jsx)("h1",{children:"[ \uc628\ub77c\uc778 \uba54\ubaa8\uc7a5 - Back Office ]"}),(0,y.jsxs)("div",{id:"userContainer",children:[(0,y.jsxs)("div",{children:["\uac00\uc785\uc790: ",r,"\uba85"]}),(0,y.jsx)("div",{className:"hideMobile",children:",\xa0"}),(0,y.jsxs)("div",{children:["\ud0c8\ud1f4\uc790: ",s,"\uba85"]})]})]}),(0,y.jsx)("br",{}),(0,y.jsxs)("div",{style:{position:"relative",width:"76%",maxHeight:"500px",marginLeft:"4px",marginBottom:"2px",border:"1px solid #ccc",borderRadius:"3px"},children:[(0,y.jsx)(v,{children:(0,y.jsx)(C,{selectsRange:!0,shouldCloseOnSelect:!0,onChange:e=>t(e),minDate:new Date(new Date("2025-08-01").toLocaleString("en-US",{timeZone:"Asia/Seoul"})),startDate:o,maxDate:(()=>{const e=new Date((new Date).toLocaleString("en-US",{timeZone:"Asia/Seoul"})),n=e.getHours(),t=e.getMinutes();return n>15||15===n&&t>=1?e.setDate(e.getDate()-1):e.setDate(e.getDate()-2),e})(),endDate:a,value:(()=>{const e=o?"".concat(String(o.getFullYear()).slice(2,4),".").concat(String(o.getMonth()+1).padStart(2,"0"),".").concat(String(o.getDate()).padStart(2,"0")):"\ubbf8\uc120\ud0dd",n=a?"".concat(String(a.getFullYear()).slice(2,4),".").concat(String(a.getMonth()+1).padStart(2,"0"),".").concat(String(a.getDate()).padStart(2,"0")):"\ubbf8\uc120\ud0dd";return"".concat(e," ~ ").concat(n,"  \ud83d\udcc6")})(),onFocus:e=>e.target.blur(),popperPlacement:"bottom-start",popperModifiers:[{name:"flip",options:{fallbackPlacements:[]}},{name:"preventOverflow",options:{tether:!1}}]})}),T&&(0,y.jsx)(x(),{highcharts:g(),options:T,style:{width:"100%",height:"100%"}})]}),(0,y.jsx)("div",{ref:z,style:{width:"76%",minHeight:"398px",backgroundColor:"#f4f3ee"}},j),(0,y.jsxs)("button",{id:"logoutButton",onClick:()=>{(0,w._1)({title:"\ub85c\uadf8\uc544\uc6c3 \ud655\uc778",message:"\uc815\ub9d0 \ub85c\uadf8\uc544\uc6c3 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",buttons:[{label:"\uc608",onClick:()=>{localStorage.clear(),sessionStorage.clear(),window.location.href="/login"}},{label:"\uc544\ub2c8\uc624",onClick:()=>{}}]})},children:["\ub85c\uadf8\uc544\uc6c3 ",(0,y.jsx)("i",{className:"fa fa-sign-out","aria-hidden":"true"})]})]})}},60061:(e,n,t)=>{function o(){const e=localStorage.getItem("accessToken"),n=localStorage.getItem("refreshToken");e&&n||(window.location.href="/login")}t.r(n),t.d(n,{CheckToken:()=>o})}}]);